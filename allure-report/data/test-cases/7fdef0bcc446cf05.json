{
  "uid" : "7fdef0bcc446cf05",
  "name" : "XXX接口",
  "fullName" : "test_cases.upload.test_upload#test_upload",
  "historyId" : "b59e4ce69adad5cfed19159ac62df6d2",
  "time" : {
    "start" : 1687145757462,
    "stop" : 1687145757491,
    "duration" : 29
  },
  "status" : "broken",
  "statusMessage" : "AttributeError: 'int' object has no attribute 'json'",
  "statusTrace" : "core = <conftest.collection.<locals>.Core object at 0x105391290>\nenv = ('https://open.xwdsp.com/upload', 'POST'), case = '更换照片2'\ninputs = {'assert_key': '$..success', 'assert_way': 'unequal', 'file': {'file': ('upload.xlsx', <_io.BufferedReader name='/Users/tanlinhai/t2-api-autotest/files/upload.xlsx'>, 'application/json')}, 'json': {'key': ['3593'], 'key2': [None]}, ...}\nexpectation = {'response': True}\n\n    @allure.feature('XXX模块')\n    @allure.title('XXX接口')\n    @pytest.mark.imports\n    @pytest.mark.datafile('test_data/upload/test_upload.yml')\n    def test_upload(core, env, case, inputs, expectation):\n        # core.requests: 返回请求方法对象\n        # core.headers: 返回全局请求头\n        # core.sql: 返回查询方法对象\n        # core.cache: 返回缓存处理方法对象\n>       res = core.requests.request(env, data=inputs['json'], headers=core.headers, files=inputs['file']).json()\nE       AttributeError: 'int' object has no attribute 'json'\n\ntest_cases/upload/test_upload.py:17: AttributeError",
  "flaky" : false,
  "newFailed" : false,
  "beforeStages" : [ {
    "name" : "_session_faker",
    "time" : {
      "start" : 1687145757070,
      "stop" : 1687145757094,
      "duration" : 24
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "core",
    "time" : {
      "start" : 1687145757461,
      "stop" : 1687145757461,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "collection",
    "time" : {
      "start" : 1687145757461,
      "stop" : 1687145757461,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "alert_inputs",
    "time" : {
      "start" : 1687145757461,
      "stop" : 1687145757461,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  } ],
  "testStage" : {
    "status" : "broken",
    "statusMessage" : "AttributeError: 'int' object has no attribute 'json'",
    "statusTrace" : "core = <conftest.collection.<locals>.Core object at 0x105391290>\nenv = ('https://open.xwdsp.com/upload', 'POST'), case = '更换照片2'\ninputs = {'assert_key': '$..success', 'assert_way': 'unequal', 'file': {'file': ('upload.xlsx', <_io.BufferedReader name='/Users/tanlinhai/t2-api-autotest/files/upload.xlsx'>, 'application/json')}, 'json': {'key': ['3593'], 'key2': [None]}, ...}\nexpectation = {'response': True}\n\n    @allure.feature('XXX模块')\n    @allure.title('XXX接口')\n    @pytest.mark.imports\n    @pytest.mark.datafile('test_data/upload/test_upload.yml')\n    def test_upload(core, env, case, inputs, expectation):\n        # core.requests: 返回请求方法对象\n        # core.headers: 返回全局请求头\n        # core.sql: 返回查询方法对象\n        # core.cache: 返回缓存处理方法对象\n>       res = core.requests.request(env, data=inputs['json'], headers=core.headers, files=inputs['file']).json()\nE       AttributeError: 'int' object has no attribute 'json'\n\ntest_cases/upload/test_upload.py:17: AttributeError",
    "steps" : [ {
      "name" : "请求地址: https://open.xwdsp.com/upload",
      "time" : {
        "start" : 1687145757491,
        "stop" : 1687145757491,
        "duration" : 0
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "请求方法: POST",
      "time" : {
        "start" : 1687145757491,
        "stop" : 1687145757491,
        "duration" : 0
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "请求头",
      "time" : {
        "start" : 1687145757491,
        "stop" : 1687145757491,
        "duration" : 0
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "88fc862b4ceeb015",
        "name" : "请求头",
        "source" : "88fc862b4ceeb015.json",
        "type" : "application/json",
        "size" : 141
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "请求数据",
      "time" : {
        "start" : 1687145757491,
        "stop" : 1687145757491,
        "duration" : 0
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "6eac88e1668bc2a",
        "name" : "请求数据",
        "source" : "6eac88e1668bc2a.json",
        "type" : "application/json",
        "size" : 71
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    }, {
      "name" : "接口响应码: 404",
      "time" : {
        "start" : 1687145757491,
        "stop" : 1687145757491,
        "duration" : 0
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "响应耗时(ms): 27",
      "time" : {
        "start" : 1687145757491,
        "stop" : 1687145757491,
        "duration" : 0
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 0,
      "shouldDisplayMessage" : false,
      "hasContent" : false
    }, {
      "name" : "响应数据",
      "time" : {
        "start" : 1687145757491,
        "stop" : 1687145757491,
        "duration" : 0
      },
      "status" : "passed",
      "steps" : [ ],
      "attachments" : [ {
        "uid" : "b8d4f5d99e63188a",
        "name" : "响应数据",
        "source" : "b8d4f5d99e63188a.json",
        "type" : "application/json",
        "size" : 3
      } ],
      "parameters" : [ ],
      "stepsCount" : 0,
      "attachmentsCount" : 1,
      "shouldDisplayMessage" : false,
      "hasContent" : true
    } ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 7,
    "attachmentsCount" : 3,
    "shouldDisplayMessage" : true,
    "hasContent" : true
  },
  "afterStages" : [ {
    "name" : "core::0",
    "time" : {
      "start" : 1687145757493,
      "stop" : 1687145757493,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  }, {
    "name" : "collection::0",
    "time" : {
      "start" : 1687145757493,
      "stop" : 1687145757493,
      "duration" : 0
    },
    "status" : "passed",
    "steps" : [ ],
    "attachments" : [ ],
    "parameters" : [ ],
    "stepsCount" : 0,
    "attachmentsCount" : 0,
    "shouldDisplayMessage" : false,
    "hasContent" : false
  } ],
  "labels" : [ {
    "name" : "feature",
    "value" : "XXX模块"
  }, {
    "name" : "tag",
    "value" : "datafile('test_data/upload/test_upload.yml')"
  }, {
    "name" : "tag",
    "value" : "imports"
  }, {
    "name" : "tag",
    "value" : "upload"
  }, {
    "name" : "parentSuite",
    "value" : "test_cases.upload"
  }, {
    "name" : "suite",
    "value" : "test_upload"
  }, {
    "name" : "host",
    "value" : "tanlinhaideMacBook-Pro.local"
  }, {
    "name" : "thread",
    "value" : "81302-MainThread"
  }, {
    "name" : "framework",
    "value" : "pytest"
  }, {
    "name" : "language",
    "value" : "cpython3"
  }, {
    "name" : "package",
    "value" : "test_cases.upload.test_upload"
  }, {
    "name" : "resultFormat",
    "value" : "allure2"
  } ],
  "parameters" : [ {
    "name" : "case",
    "value" : "'更换照片2'"
  }, {
    "name" : "env",
    "value" : "('https://open.xwdsp.com/upload', 'POST')"
  }, {
    "name" : "expectation",
    "value" : "{'response': True}"
  }, {
    "name" : "inputs",
    "value" : "{'params': {}, 'json': {'key': ['3593'], 'key2': [None]}, 'file': {'file': ('upload.xlsx', <_io.BufferedReader name='/Users/tanlinhai/t2-api-autotest/files/upload.xlsx'>, 'application/json')}, 'sql': None, 'assert_key': '$..success', 'assert_way': 'unequal'}"
  } ],
  "links" : [ ],
  "hidden" : false,
  "retry" : false,
  "extra" : {
    "severity" : "normal",
    "retries" : [ ],
    "categories" : [ {
      "name" : "Test defects",
      "matchedStatuses" : [ ],
      "flaky" : false
    } ],
    "tags" : [ "datafile('test_data/upload/test_upload.yml')", "imports", "upload" ]
  },
  "source" : "7fdef0bcc446cf05.json",
  "parameterValues" : [ "'更换照片2'", "('https://open.xwdsp.com/upload', 'POST')", "{'response': True}", "{'params': {}, 'json': {'key': ['3593'], 'key2': [None]}, 'file': {'file': ('upload.xlsx', <_io.BufferedReader name='/Users/tanlinhai/t2-api-autotest/files/upload.xlsx'>, 'application/json')}, 'sql': None, 'assert_key': '$..success', 'assert_way': 'unequal'}" ]
}